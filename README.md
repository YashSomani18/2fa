# 2FA Backend Service

This project is a Node.js backend application implementing Two-Factor Authentication (2FA) using Time-based One-Time Passwords (TOTP). It utilizes `otplib` for OTP generation and verification, `nodemailer` for sending OTPs via email, and `mongoose` for MongoDB interactions.

## Features

- **User Enrollment for 2FA**: Users can enroll in 2FA, which generates a TOTP secret and sends an initial OTP via email.
- **2FA Login**: Users can log in using their email and a TOTP code generated by their authenticator app.

## Installation

To get started with this project, clone the repo and install the dependencies:

```bash
git clone https://your-repository-url.git
cd 2fa
npm install
```

## Configuration

Create a `.env` file in the root directory of the project and add the following environment variables:

```env
MONGODB_URI=mongodb://your-mongodb-uri
HOST_EMAILID=your-email@gmail.com
HOST_PASSKEY=your-email-password
TIME=300  # TOTP validity time in seconds
WINDOW=1  # TOTP verification window
```

## Running the Application

Start the server by running:

```bash
npm start
```

The server will start on `http://localhost:3000`.

## Endpoints

- **POST `/enroll`**: Enroll a user in 2FA.
  - Request body should contain `email`.
- **POST `/login`**: Log in using 2FA.
  - Request body should contain `email` and `code` (TOTP code).

## Usage

To enroll in 2FA, send a POST request to `/enroll` with your email. Check your email for the OTP and use it along with your email to send a POST request to `/login`.

## Contributing

Contributions to this project are welcome. Please create a branch for your features or fixes and submit a pull request.

## License

This project is licensed under the MIT License.

---

*Note: Remember to replace `https://your-repository-url.git` with your actual repository URL and provide accurate MongoDB URI and email credentials in the `.env` file. This README assumes a basic understanding of Node.js and MongoDB environments.*
